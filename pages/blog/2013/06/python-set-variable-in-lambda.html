pythonのlambda内で無理やり変数を定義する
2013-06-02 22:26
keywords: python lambda

lambdaって楽しいよね！　実用する気にはならないけれど！<br>
という訳で、lambdaの小ネタを。<br>
<br>
lambdaのルールとして、変数定義はできません。あと、文も書けません。if文とかね。<br>
それをくぐり抜けようというのが今回の趣旨。<br>
if文はとりあえず前に書いた<a href="/blog/2013/05/python-conditional-operator">三項演算子</a>を使えばおっけー。<br>
<br>
で、変数。<br>
Lispのletみたいな事をします。<br>
<pre class="code"><code>f = lambda a, b: (lambda x=a*b : x*a)</code></pre>
でおっけー。<br>
<br>
<pre class="code"><code>def f(a, b):
	x = a * b
	return x * a
</code></pre>
と同じ意味ね。<br>
代入は出来ないけれど、まあなんとかなるだろ、きっと。<br>
<br>
これを利用して<br>
<pre class="code">&gt;&gt;&gt; (lambda x, func=(lambda self, x : (x * self(self, x-1)) if x&gt;1 else x) : func(func, x))(5)
120</pre>
みたいな事も可能。階乗ね。<br>
これで無名関数を代入せず再帰できる！　・・・見辛いだけだけどね。<br>
