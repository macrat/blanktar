親は大切に
2013-01-04 20:53
keywords: python threading

拍手返信だよ。<br>
<br>
またまたコメントいただきました、<a href="/blog/2013/01/kill-parent-in-c-lang">前回</a>の方から。<br>
<q>Python で親殺しってできましたっけ？</q><br>
<br>
<b>そんなに親を殺したいのか貴様ッ</b><br>
<br>
基本的に（変な裏技を使わない限り）、pythonでは人殺しできないようです。（確認したのはthreadingだけだけどね）<br>
いつか実装されるのかもしれないけどね。とりあえず、無理っぽい。<br>
<br>
いや、それでも俺は親に死んでもらいたいんだ、って場合。
その場合は、<br>
<pre class="code"><code>threading.currentThread()</code></pre>
ってやると、メインスレッドのハンドルを取得できるようです。<br>
取得したハンドルに対して前回の方法を使えば自殺できるし、子スレッドに渡せば親殺しができる、かもね。<br>
ちなみにwindowsの2.7.3で実験してみたら、isAliveで確認すると死んでるのに、動作はしているというよく分からんことになりました。<br>
すごく危ないかもわからん、これ。<br>
<br>
親は大切に、joinでも呼び出して放置しておけばいいんじゃないかしら。<br>
まあそれ以前に、可能な限り他殺なしで動くように設計するのがベストなんでしょうけどね<br>
<br>
<br>
あ、ちなみに。<br>
multiprocessingなら、terminate()で終了させられるようです。子プロセスに限るけどさ。<br>
ただ、終了ハンドラは動かないっぽいねー。<br>
子孫プロセスは孤立するわ、資源のロックは解除しないわってことで、最後の手段っぽい。<br>
