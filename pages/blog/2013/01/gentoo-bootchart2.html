gentooでbootchart2を使ってみる
2013-01-22 17:39
keywords: gentoo linux bootchart2 ベンチマーク

<section>
	PCの起動は早い方が良いよね。とくにノートPCは早い方が良い。<br>
	と言う訳で高速化だー。ベンチマークだー。bootchart2だー。<br>
	て言ってググったんだけどさ。どうにも分かりやすい日本語のマニュアルが無い・・・。<br>
	仕方がないので、簡単に使い方をまとめるよ。<br>
</section>
<article>
	<section>
		<h3>1.インストール</h3>
		<pre class="code"><code># emerge bootchart2</code></pre>
		keywordがどうのこうのって言われたら、32bitなら<br>
		<pre class="code"><code># echo app-benchmarks/bootchart2 ~x86 &gt;&gt; /etc/portage/package.keywords</code></pre>
		64bitなら<br>
		<pre class="code"><code># echo app-benchmarks/bootchart2 ~amd64 &gt;&gt; /etc/portage/package.keywords</code></pre>
		で解決ね。<br>
		まあ、ここは普通にいつも通り。<br>
	</section>
	<section>
		<h3>2.設定</h3>
		bootchartの設定ファイルは<b>/etc/bootchartd.conf</b>にあるよ。<br>
		そのままでも問題ないと思うけどね。<br>
		<br>
		で、次。<br>
		<b>sys-app/baselayout</b>とやらのバージョンを確認します。<br>
		<pre class="code"><code># emerge -pv baselayout</code></pre>
		で確認ね。<br>
		<section>
			<h4>baselayoutのバージョンが2.x以上</h4>
			<b>/boot/grub/grub.conf</b>を開いて、kernelから始まってる行の一番後ろに<br>
			<pre class="code"><code>init=/sbin/bootchartd</code></pre>
			って追加します。<br>
			何かあるとまずいから、バックアップは忘れずに。<br>
			<br>
			initrdを使ってる場合は・・・すいません、分からないっす。<br>
		</section>
		<section>
			<h4>baselayoutのバージョンが2.x未満</h4>
			<b>/etc/rc.conf</b>の末尾に<br>
			<pre class="code"><code>RC_BOOTCHART="yes"</code></pre>
			って追記します。<br>
			rc.confが無い場合は<b>/etc/conf.d/rc</b>になるのかな？　よく分からないけど。<br>
		</section>
		<br>
	</section>
	<section>
		<h3>3.再起動して確認してみる</h3>
		ここまでやれば動くはずです、再起動してみてください。<br>
		成功していたら<b>/var/log/bootchart.png</b>ってのと<b>/var/log/bootchart.tgz</b>ってのが出来てるはず。<br>
		見当たらない？　ちょっと待ってみてください。どうも起動してちょっと経ってから出来ることもあるっぽいので。<br>
		<br>
		pngの方を開くと、各プロセスの起動に掛かった時間とか、CPUの使用状況とかが書いてあります。<br>
		参考にして色々チューニングすると良いかもね。<br>
		<br>
	</section>
</article>
<section>
	とりま本日はここまで。<br>
	高速化のtipsも書けると嬉しいんだけどねー・・・。悲しいかな知識不足。<br>
	<br>
	参考: <a href="http://en.gentoo-wiki.com/wiki/Bootchart2" target="_blank">Bootchart2 - Gentoo Linux Wiki</a><br>
</section>
