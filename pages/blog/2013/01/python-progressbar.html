pythonのコンソールでプログレスバー的なもの
2013-01-17 00:48
keywords: python プログレスバー コンソール

pythonでさ、プログレスバー書きたくなる事あるじゃないですか。<br>
というわけで<a href="/works/tool/star/">star</a>で使ってるロジックをご紹介。<br>
ていってもまあ、すごいしょーもない内容ですが。<br>
<br>
<pre class="code"><code>#!/usr/bin/python

import sys
import time

def PutBar(per, barlen):
	perb = int(per/(100.0/barlen))

	s = '\r'
	s += '|'
	s += '#' * perb
	s += '-' * (barlen - perb)
	s += '|'
	s += ' ' + (str(per) + '%').rjust(4)

	sys.stdout.write(s)

for per in range(100):
	PutBar(per, 50)
	time.sleep(0.1)
PutBar(100, 50)
</code></pre>
<br>
以上、これだけだ。<br>
\r、つまりキャリッジリターンってやつ。復帰だっけ？<br>
左端にカーソルを戻してから、プログレスバーを描画・・・っていうか、書き込む訳ですな。<br>
<pre class="code"><code>\r|##########----------|  50%</code></pre><br>
的なね。<br>
ご活用くださひ。<br>
